# Unity_GUI_Calculate
3D游戏编程的第二次作业，使用unity的GUI实现一个简单的计算器,最终成果是一个可以使用的script<br><br>
使用方法是将该script导入场景中的摄像头中（随意一个物件），点击开始就能看到屏幕上出现一个方框<br>
(插一张图片)<br>
* 点击可以点击数字键输入数字
* 点击符号键输入+-*/，以及可以表示小数的小数点和括号
* 如果有输入错误可以用退格键删除最末尾的字符
* 如果点击左下角的C可以全部清除
* 点击=进行计算，如果算式的格式错误=将不会输出任何结果
## 设计思路
这个Script一共分为三个部分，分别是**实体**，**GUI绘制**，**组件**<br>
* 实体：用于存储所有需要用到的实体的状态和模型
* GUI绘制：仅用于进行对于GUI的绘制，此部分不含有具体的函数实现
* 组件：此部分包含了程序需要实现的主要功能，将具体的功能封装成不同的函数，最后集中在OnGUI的函数中进行调用
## 具体实现
### 实体
```csharp
private GUIStyle labelStyle;//文本框显示文字的大小与位置
private GUIStyle buttonStyle;//按钮上文字的style
private List<char> vec=new List<char>();//储存算式或结果的地方
string equation = string.Empty;//拼接成字符串的式子或结果（用于显示）
```
* lablestyle：用于调整文本框中文字的格式与大小
* buttonStyle：用于调整按钮中的文字格式与大小
* vec：一个存储字符的List类型，用于存储用户的输入行为，每输入一个符号就会在末尾插入，方便最后进行计算
* equation：一个将用户输入的所有字符拼接之后的字符串（算式），用于在文本框中显示
### GUI绘制
```csharp
void OnGUI()
{
    Init();//将默认的配置初始化
    GUI.Box(new Rect(500, 300, 445, 400),"计算器");//范围是x500-945，y300-700
    GUI.Label(new Rect(550, 325, 370, 60), equation, labelStyle);//初始化用于显示计算的文本框，之后更改equation中的内容，就可以更改显示的文本
    mybutton();//进行按钮的相关逻辑
}
```
该函数在画面的每一帧都会调用，Init和mybutton函数都是组件中的功能性函数，不在这个部分做具体实现，该部分主要用来绘制GUI的主要外观<br>
使用**GUI.Box**函数绘制存放所有按钮与文本框的界面（相当于**背景**），拥有两个参数：
* 第一个位置是创建界面的Position，该参数随附一个Rect函数，其中四个参数分别表示（最左侧位置、最顶部位置、总宽度、总高度）
* 第二个位置是Content，表示创建的该Box的标题，可以输入字符串
同理，使用**GUI.Label**来绘制用于显示算式和结果的文本框，拥有三个参数：
* 第一个参数与上面同理，不再赘述
* 第二个参数equation是自己创建的一个字符串变量，用于存储算式和答案，因为OnGUI每一帧都会调用，因此当equation变化的时候文本框中的文字也会变化，不需要每次变化的时候都更新一遍文本框，只需要**更新equation**就行
* 第三个参数便是设置好的文本框格式
### 组件
#### 状态初始化
#### 按钮逻辑
##### 数字符号
##### 退格
##### 清空
##### 计算
#### 计算逻辑
